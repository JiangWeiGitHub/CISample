environment:
  nodejs_version: "6"

install:
  - npm install electron-prebuilt --save-dev
  - npm install electron-builder webpack
  - npm install
  - ./node_modules/.bin/webpack
  - npm run build

before_build:
  - ./node_modules/.bin/build --config ./electron-builder.yml --win --x64
  - mv testApp\ Setup\ 1.0.0.exe wisnucAssistent.exe

deploy:
  release: wisnucAssistant-v$(appveyor_build_version)
  description: 'Release test'
  provider: GitHub
  auth_token:
    secure: ec671fce07cffeb37038f88f61533a534bda80fa
  artifact: ./wisnucAssistent.exe
  draft: false
  prerelease: false
  on:
    branch: master                 # release from master branch only
    appveyor_repo_tag: true        # deploy on tag push only
